name: train_cancer_model
kind: python
metadata:
  description: A simple example of training a scikit-learn ML model using a
    standard dataset available. The function represents a training job that logs
    the resulting ML model artifact as Model in the project under
    'cancer_classifier' name.
  version: 5e064afe3b464b11a3e5c83baa51197e
  labels:
    - scikit-learn
    - machine learning
spec:
  requirements:
    - scikit-learn==1.2.2
  python_version: PYTHON3_10
  source:
    source: src/train.py
    handler: breast_cancer_generator
    base64: aW1wb3J0IHBhbmRhcyBhcyBwZApmcm9tIHNrbGVhcm4uZGF0YXNldHMgaW1wb3J0IGxvYWRfYnJlYXN0X2NhbmNlcgoKZnJvbSBkaWdpdGFsaHViX3J1bnRpbWVfcHl0aG9uIGltcG9ydCBoYW5kbGVyCgpmcm9tIHNrbGVhcm4ubW9kZWxfc2VsZWN0aW9uIGltcG9ydCB0cmFpbl90ZXN0X3NwbGl0Cgpmcm9tIHNrbGVhcm4uc3ZtIGltcG9ydCBTVkMKZnJvbSBwaWNrbGUgaW1wb3J0IGR1bXAKaW1wb3J0IHNrbGVhcm4ubWV0cmljcwppbXBvcnQgb3MKCkBoYW5kbGVyKCkKZGVmIGJyZWFzdF9jYW5jZXJfZ2VuZXJhdG9yKHByb2plY3QpOgogICAgIiIiCiAgICBBIGZ1bmN0aW9uIHdoaWNoIGdlbmVyYXRlcyB0aGUgYnJlYXN0IGNhbmNlciBkYXRhc2V0CiAgICAiIiIKICAgIGJyZWFzdF9jYW5jZXIgPSBsb2FkX2JyZWFzdF9jYW5jZXIoKQogICAgZGZfY2FuY2VyID0gcGQuRGF0YUZyYW1lKAogICAgICAgIGRhdGE9YnJlYXN0X2NhbmNlci5kYXRhLCBjb2x1bW5zPWJyZWFzdF9jYW5jZXIuZmVhdHVyZV9uYW1lcwogICAgKQogICAgYnJlYXN0X2NhbmNlcl9sYWJlbHMgPSBwZC5EYXRhRnJhbWUoZGF0YT1icmVhc3RfY2FuY2VyLnRhcmdldCwgY29sdW1ucz1bInRhcmdldCJdKQogICAgZGZfY2FuY2VyID0gcGQuY29uY2F0KAogICAgICAgIFtkZl9jYW5jZXIsIGJyZWFzdF9jYW5jZXJfbGFiZWxzXSwgYXhpcz0xCiAgICApCgogICAgWCA9IGRmX2NhbmNlci5kcm9wKFsndGFyZ2V0J10sYXhpcz0xKQogICAgeSA9IGRmX2NhbmNlclsndGFyZ2V0J10KICAgIFhfdHJhaW4sIFhfdGVzdCwgeV90cmFpbiwgeV90ZXN0ID0gdHJhaW5fdGVzdF9zcGxpdChYLCB5LCB0ZXN0X3NpemUgPSAwLjIwLCByYW5kb21fc3RhdGU9NSkKICAgIHN2Y19tb2RlbCA9IFNWQygpCiAgICBzdmNfbW9kZWwuZml0KFhfdHJhaW4sIHlfdHJhaW4pCiAgICB5X3ByZWRpY3QgPSBzdmNfbW9kZWwucHJlZGljdChYX3Rlc3QpCgogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKCJtb2RlbCIpOgogICAgICAgIG9zLm1ha2VkaXJzKCJtb2RlbCIpCgogICAgd2l0aCBvcGVuKCJtb2RlbC9jYW5jZXJfY2xhc3NpZmllci5wa2wiLCAid2IiKSBhcyBmOgogICAgICAgIGR1bXAoc3ZjX21vZGVsLCBmLCBwcm90b2NvbD01KQoKICAgIG1ldHJpY3MgPSB7CiAgICAgICAgImYxX3Njb3JlIjogc2tsZWFybi5tZXRyaWNzLmYxX3Njb3JlKHlfdGVzdCwgeV9wcmVkaWN0KSwKICAgICAgICAiYWNjdXJhY3kiOiBza2xlYXJuLm1ldHJpY3MuYWNjdXJhY3lfc2NvcmUoeV90ZXN0LCB5X3ByZWRpY3QpLAogICAgICAgICJwcmVjaXNpb24iOiBza2xlYXJuLm1ldHJpY3MucHJlY2lzaW9uX3Njb3JlKHlfdGVzdCwgeV9wcmVkaWN0KSwKICAgICAgICAicmVjYWxsIjogc2tsZWFybi5tZXRyaWNzLnJlY2FsbF9zY29yZSh5X3Rlc3QsIHlfcHJlZGljdCksCiAgICB9CiAgICBwcm9qZWN0LmxvZ19tb2RlbCgKICAgICAgICAgICAgbmFtZT0iY2FuY2VyX2NsYXNzaWZpZXIiLAogICAgICAgICAgICBraW5kPSJza2xlYXJuIiwKICAgICAgICAgICAgc291cmNlPSIuL21vZGVsLyIsCiAgICAgICAgICAgIG1ldHJpY3M9bWV0cmljcwogICAgKQ==
    lang: python

